[Const]
OriginLat = 23.023899623618
OriginLon = 113.488177461743

[ColumnSettings]
ID = ptcId
Time = data.timestamp
PositionX = pos.lat
PositionY = pos.lon
PositionZ = None
Length = size.length
Width = size.width
Height = size.height
Yaw = heading
Pitch = None
Roll = None
VX = speed
VY = speed
VZ = None
AX = None
AY = None
AZ = None
Category = ptcType
Style = None
Color = vehicleColor
Ego = None

[SeriesRules]
Time = lambda x: x / 1000
Length = lambda x: x / 100
Width = lambda x: x / 100
Height = lambda x: x / 100
Yaw = lambda x: (90.0 - x * 0.0125) %% 360.0
ID = lambda x: x
Category = lambda x: {0:'unknown', 1:'motor', 2:'non-motor', 3:'pedestrian', 4:'rsu'}.get(x,x)
Color = lambda x: {0:'white',1:'gray',3:'yellow',4:'pink',5:'purple',6:'green',7:'blue',8:'red',9:'brown',10:'orange',11:'black'}.get(x,x)

[DataframeRules]
VX = lambda x: x['speed'] * 0.02 * math.cos(math.radians(x['heading']))
VY = lambda x: x['speed'] * 0.02 * math.sin(math.radians(x['heading']))
Ego = lambda x: 'Y' if x['ptcId'] == 0 else 'N'
PositionX, PositionY, PositionZ = lambda x: pymap3d.geodetic2enu(x['pos.lat'], x['pos.lon'], 0.0, ${Const:OriginLat}, ${Const:OriginLon}, 0.0)